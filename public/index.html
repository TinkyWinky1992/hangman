<!DOCTYPE html>
<html lang="en">
  <!-- Google Tag Manager -->
  <script>
    (function (w, d, s, l, i) {
      w[l] = w[l] || [];
      w[l].push({ "gtm.start": new Date().getTime(), event: "gtm.js" });
      var f = d.getElementsByTagName(s)[0],
        j = d.createElement(s),
        dl = l != "dataLayer" ? "&l=" + l : "";
      j.async = true;
      j.src = "https://www.googletagmanager.com/gtm.js?id=" + i + dl;
      f.parentNode.insertBefore(j, f);
    })(window, document, "script", "dataLayer", "GTM-WW6BXNCP");
  </script>
  <!-- End Google Tag Manager -->
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <head>
      <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
        rel="stylesheet"
      />
      <link rel="icon" href="/img/favicon.ico" type="image/x-icon" />
      <link rel="shortcut icon" href="/img/favicon.ico" type="image/x-icon" />
      <link
        rel="icon"
        type="image/png"
        href="/img/favicon-32x32.png"
        sizes="32x32"
      />
      <link
        rel="icon"
        type="image/png"
        href="/img/favicon-16x16.png"
        sizes="16x16"
      />
      <!-- Title of the page -->
      <meta property="og:title" content="Hangman creator" />

      <!-- Description -->
      <meta property="og:description" content="enjoy playong hangman" />

      <!-- URL of your website -->
      <meta property="og:url" content="https://game-gg9v.onrender.com" />

      <!-- URL of the image you want to display -->
      <meta
        property="og:image"
        content="https://game-gg9v.onrender.com/hangman.jpg"
      />

      <!-- Type of content -->
      <meta property="og:type" content="website" />
    </head>

    <title>Hangman creator</title>
    <style>
      html {
        overflow: auto;
      }
      body {
        overflow: auto;
        font-family: "Inter";
        text-align: center;
        padding: 10px 20px;
      }
      
      .main-container {
        display: flex;
        padding: 100px 50px;
        flex-direction: column;
        justify-content: center;
        align-items: center;
      }

      .input-container {
        display: flex;
        gap: 15px;
        align-items: center;
        flex-direction: column;
      }

      input[type="text"],
      input[type="submit"] {
        color: rgba(112, 142, 245, 0.8);
        font-family: Inter;
        font-size: 16px;
        font-style: normal;
        font-weight: 600;
        line-height: normal;
        padding: 10px 20px;
        justify-content: center;
        align-items: center;
        gap: 10px;
        border-radius: 12px;
        border: 1px solid rgba(112, 142, 245, 0.8);
        background: rgba(112, 142, 245, 0.4);
        box-shadow: 0px 4px 4px 0px rgba(0, 0, 0, 0.25);
        backdrop-filter: blur(2px);
        cursor: pointer;
      }
      input[type="submit"]:hover {
        background-color: rgba(112, 142, 245, 0.6);
      }

      input[type="submit"]:active {
        background-color: rgba(112, 142, 245, 0.8);
      }

      #link-container {
        margin-top: 20px;
      }
      .share_link img {
        width: 30px;
        height: 30px;
      }

      #menu-title {
        color: #708ef5;
        text-align: center;
        text-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25);
        font-family: "Inter", sans-serif;
        font-size: 20px;
        font-style: normal;
        font-weight: 700;
        line-height: normal;
        margin-bottom: 20px;
      }

      #word-input {
        width: 288px;
        padding: 10px;
        align-items: flex-start;
        gap: 10px;
        border-radius: 12px;
        border: 1px solid rgba(112, 142, 245, 0.8);
        background: rgba(112, 142, 245, 0.2);
        color: rgba(112, 142, 245, 0.5);
        font-family: "Inter";
        font-size: 16px;
        font-style: normal;
        font-weight: 600;
        line-height: normal;
      }

      #word-input::placeholder {
        color: rgba(112, 142, 245, 0.5);
        font-family: Inter;
        font-size: 16px;
        font-style: normal;
        font-weight: 600;
        line-height: normal;
      }
      #hint-input {
        width: 288px;
        padding: 10px;
        align-items: flex-start;
        gap: 10px;
        border-radius: 12px;
        border: 1px solid rgba(112, 142, 245, 0.8);
        background: rgba(112, 142, 245, 0.2);
        color: rgba(112, 142, 245, 0.5);
        font-family: "Inter";
        font-size: 16px;
        font-style: normal;
        font-weight: 600;
        line-height: normal;
      }
      #hint-input::placeholder {
        color: rgba(112, 142, 245, 0.5);
        font-family: Inter;
        font-size: 16px;
        font-style: normal;
        font-weight: 600;
        line-height: normal;
      }

      #snap-btn-title {
        color: #000;
        text-align: center;
        font-family: Inter;
        font-size: 12px;
        font-style: normal;
        font-weight: 600;
        line-height: normal;
      }
      .hidden-cantiner {
        display: none;
        padding: 20px 0px;
        justify-content: center;
        align-items: center;
        gap: 10px;
      }
      .try-your-self-continer {
        display: flex;
        width: 100px;
        height: 90px;
        padding: 10px;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        gap: 10px;
        flex-shrink: 0;
      }
      #try-your-self-btn {
        display: flex;
        padding: 10px;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        gap: 10px;
        border-radius: 8px;
        border: 1px solid rgba(246, 212, 13, 0.8);
        background: rgba(246, 212, 13, 0.6);
        cursor: pointer;
      }

      .share-to-friend-container {
        display: flex;
        padding: 10px;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        gap: 10px;
        flex-shrink: 0;
      }

      #share-to-friend-btn {
        display: flex;
        padding: 10px;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        gap: 10px;
        border-radius: 8px;
        border: 1px solid rgba(112, 142, 245, 0.8);
        background: rgba(112, 142, 245, 0.6);
        cursor: pointer;
      }

      .whatsapp-container {
        display: flex;
        padding: 10px;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        gap: 10px;
        flex-shrink: 0;
      }

      #whatapp-btn {
        display: flex;
        padding: 10px;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        gap: 10px;
        border-radius: 8px;
        border: 1px solid rgba(74, 255, 190, 0.8);
        background: #64b161;
        cursor: pointer;
      }
      .responsive-image {
        width: 300px;
        height: 300px;
      }
      @media (max-width: 200px) {
        .responsive-image {
          width: 200px;
          height: 200px;
        }
      }
    </style>
  </head>
  <body>
    <!-- Google Tag Manager (noscript) -->
    <noscript
      ><iframe
        src="https://www.googletagmanager.com/ns.html?id=GTM-WW6BXNCP"
        height="0"
        width="0"
        style="display: none; visibility: hidden"
      ></iframe
    ></noscript>
    <!-- End Google Tag Manager (noscript) -->
    <div class="main-container">
      <h1 id="menu-title">Create a Hangman for a Friend</h1>

      <div class="input-container">
        <input
          type="text"
          id="word-input"
          onkeypress="hitInputChanged()"
          pattern="[A-Za-z\s]+"
          placeholder="Enter a word/s "
        />
        <input
          type="text"
          id="hint-input"
          onkeypress="inputchnaged()"
          pattern="[A-Za-z\s]+"
          placeholder="Give a Hint "
        />

        <input type="submit" value="Create Link" onclick="createLink()" />
      </div>
      <div id="word-display" class="word-display"></div>

      <div class="hidden-cantiner">
        <div class="try-your-self-continer">
          <div id="try-your-self-btn" onclick="tryYourSelf()">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="20"
              height="21"
              viewBox="0 0 20 21"
              fill="none"
            >
              <path
                d="M16.1432 11.348C16.7698 10.9564 16.7698 10.0437 16.1432 9.65203L5.69663 3.12295C5.03058 2.70667 4.16663 3.18551 4.16663 3.97094V17.0291C4.16663 17.8146 5.03058 18.2934 5.69662 17.8771L16.1432 11.348Z"
                fill="white"
              />
            </svg>
          </div>
          <div id="snap-btn-title">Try it your self</div>
        </div>
        <div class="share-to-friend-container">
          <div id="share-to-friend-btn" onclick="shareLink()">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="20"
              height="21"
              viewBox="0 0 20 21"
              fill="none"
            >
              <path
                d="M16.6667 14.6365C15.8222 14.6365 15.0667 14.9378 14.4889 15.4096L6.56667 11.243C6.62222 11.012 6.66667 10.7811 6.66667 10.5402C6.66667 10.2992 6.62222 10.0683 6.56667 9.83735L14.4 5.71084C15 6.21285 15.7889 6.5241 16.6667 6.5241C18.5111 6.5241 20 5.17871 20 3.51205C20 1.84538 18.5111 0.5 16.6667 0.5C14.8222 0.5 13.3333 1.84538 13.3333 3.51205C13.3333 3.75301 13.3778 3.98394 13.4333 4.21486L5.6 8.34137C5 7.83936 4.21111 7.52811 3.33333 7.52811C1.48889 7.52811 0 8.87349 0 10.5402C0 12.2068 1.48889 13.5522 3.33333 13.5522C4.21111 13.5522 5 13.241 5.6 12.739L13.5111 16.9157C13.4556 17.1265 13.4222 17.3474 13.4222 17.5683C13.4222 19.1847 14.8778 20.5 16.6667 20.5C18.4556 20.5 19.9111 19.1847 19.9111 17.5683C19.9111 15.9518 18.4556 14.6365 16.6667 14.6365Z"
                fill="white"
              />
            </svg>
          </div>
          <snap id="snap-btn-title">Share to friend</snap>
        </div>

        <div class="whatsapp-container">
          <div id="whatapp-btn" onclick="whatsAppLink()">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="20"
              height="21"
              viewBox="0 0 20 21"
              fill="none"
            >
              <path
                d="M0 20.5L1.41269 15.3646C0.541285 13.8616 0.0829298 12.1567 0.0835701 10.41C0.0858115 4.94563 4.55281 0.5 10.0419 0.5C12.7055 0.501116 15.2058 1.5332 17.0859 3.40643C18.9659 5.27967 20.001 7.76967 20 10.4179C19.9976 15.8821 15.53 20.3284 10.0419 20.3284C10.042 20.3284 10.0415 20.3284 10.0419 20.3284H10.0375C8.37094 20.3277 6.73348 19.9116 5.27901 19.1219L0 20.5ZM5.52347 17.3279L5.82589 17.5062C7.09642 18.2569 8.55313 18.6539 10.0387 18.6547H10.0419C14.6036 18.6547 18.3166 14.9592 18.3185 10.4173C18.3193 8.21623 17.4593 6.14648 15.8966 4.5896C14.3337 3.03271 12.2558 2.17482 10.0449 2.17386C5.47945 2.17386 1.76666 5.86886 1.7649 10.4106C1.76426 11.967 2.20164 13.4826 3.0303 14.7942L3.22722 15.106L2.39087 18.1455L5.52347 17.3279Z"
                fill="white"
              />
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M7.55298 6.26694C7.36663 5.85449 7.17035 5.8462 6.99297 5.83903C6.84792 5.83281 6.6819 5.83313 6.5162 5.83313C6.35035 5.83313 6.08074 5.89529 5.85277 6.14311C5.62463 6.39093 4.98169 6.99017 4.98169 8.20888C4.98169 9.42775 5.87342 10.6053 5.99782 10.7708C6.12221 10.936 7.71916 13.5169 10.2482 14.5098C12.3501 15.335 12.7777 15.1709 13.234 15.1296C13.6902 15.0883 14.706 14.5303 14.9134 13.952C15.1209 13.3736 15.1209 12.878 15.0586 12.7742C14.9963 12.6711 14.8304 12.6091 14.5817 12.4853C14.3329 12.3615 13.1096 11.7621 12.8814 11.6795C12.6533 11.5968 12.4874 11.5557 12.3216 11.8037C12.1556 12.0513 11.6791 12.6091 11.5339 12.7742C11.3887 12.9398 11.2435 12.9605 10.9947 12.8365C10.7459 12.7124 9.94449 12.451 8.99384 11.6072C8.2542 10.9507 7.7547 10.1398 7.6095 9.89184C7.46445 9.64418 7.60709 9.52178 7.71884 9.38648C7.92008 9.1428 8.25772 8.70469 8.34065 8.53958C8.42358 8.37415 8.38212 8.2296 8.32 8.10561C8.25772 7.98178 7.77407 6.75685 7.55298 6.26694V6.26694Z"
                fill="white"
              />
            </svg>
          </div>
          <snap id="snap-btn-title">Share in WhatsApp</snap>
        </div>
      </div>
      <br />
      <div>
        <img class="responsive-image" src="hangman.jpg" alt="A cute hangman" />
      </div>
    </div>
  </body>
  <script>
    let playerID = "";
    let link = "";
    let whatsapplink = "";
    let wordCreated = false;
    window.onload = () => {
      //get id from querystring
      const urlParams = new URLSearchParams(window.location.search);
      playerID = localStorage.getItem("playerID");
      if (!playerID) {
        playerID = generteId();
        localStorage.setItem("playerID", playerID);
      }
    };
    // Simple encryption using Base64 encoding (you can replace with stronger encryption)
    function generteId() {
      return Math.random().toString(36).substring(2, 15);
    }
    function encrypt(text) {
      return btoa(text);
    }

    function createLink() {
      var word = document.getElementById("word-input").value;
      if (word === "") {
        alert("Please enter a word.");
        return;
      }
      word = word.toUpperCase().trim();
      if (wordCreated) {
        alert("Change word/s to create new link");
        return;
      }
      wordCreated = true;
      var gameid = generteId();

      document.getElementById("word-display").innerHTML = convertToPattern(
        word
      ).replace(/ /g, "&nbsp;");

      console.log("createLink called"); // Debugging line
      var word = document.getElementById("word-input").value;
      document.querySelector(".hidden-cantiner").style.display = "flex";
      const encryptedWord = encrypt(word);
      link = `${window.location.origin}/hangman.html?word=${encryptedWord}&p=${playerID}&g=${gameid}`;
      whatsapplink = generateWhatsAppLink(link);
    }

    function tryYourSelf() {
     // window.location.href = "http://127.0.0.1:5500/game/public/hangman.html";
      window.location.href = link;
    }
    function whatsAppLink() {
      window.location.href = whatsapplink;
    }
    function shareLink() {
      if (navigator.share) {
        try {
          navigator.share({
            title: "Hi there",
            text: "Created just for you a  Hangman",
            url: link,
          });
          console.log("Link shared successfully!");
        } catch (error) {
          console.error("Error sharing:", error);
        }
      } else {
        alert("Your device does not support the Web Share API.");
      }
    }

    function generateWhatsAppLink(baseUrl) {
      const message = "guess my Hangman";
      const encodedMessage = encodeURIComponent(`${message} ${baseUrl}`);
      const shareUrl = `https://api.whatsapp.com/send?text=${encodedMessage}`;
      return shareUrl;
    }

    function convertToPattern(input) {
      // Trim leading/trailing spaces and replace single spaces between words with double spaces
      const trimmedInput = input.trim().toUpperCase();

      // Replace letters with underscores and keep spaces as separators
      const pattern = trimmedInput
        .split(" ")
        .map((word) => {
          // Replace each letter in the word with an underscore and join with a single space
          return word
            .split("")
            .map(() => "_")
            .join(" ");
        })
        .join("    "); // Join words with double spaces

      return pattern;
    }

    function hitInputChanged() {
      // make here your functionality as you want :)
    }

    function inputchnaged() {
      if (wordCreated) {
        wordCreated = false;
        document.getElementById("word-display").innerHTML = "";
        document.getElementById("share_link").style.display = "none";
      }
    }

    document
      .getElementById("word-input")
      .addEventListener("input", function (e) {
        this.value = this.value.replace(/[^A-Za-z\s]/g, "");
      });
  </script>
</html>
